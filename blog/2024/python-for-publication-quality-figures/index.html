<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Python for Publication Quality Figures - Part 1 | Joseph Alec Wilcox </title> <meta name="author" content="Joseph Alec Wilcox"> <meta name="description" content="How to use Python, Matplotlib and SciencePlots to create high-quality scientific figures"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website, physics, superconductivity, magnetism, experiment, condensed-matter"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%94%AC&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jaw90.github.io/blog/2024/python-for-publication-quality-figures/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Joseph</span> Alec Wilcox </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">News </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Python for Publication Quality Figures - Part 1</h1> <p class="post-meta"> Created in September 03, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/python"> <i class="fa-solid fa-hashtag fa-sm"></i> python,</a>   <a href="/blog/tag/publications"> <i class="fa-solid fa-hashtag fa-sm"></i> publications,</a>   <a href="/blog/tag/figures"> <i class="fa-solid fa-hashtag fa-sm"></i> figures</a>     ·   <a href="/blog/category/python"> <i class="fa-solid fa-tag fa-sm"></i> python,</a>   <a href="/blog/category/publications"> <i class="fa-solid fa-tag fa-sm"></i> publications</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="tldr">TL;DR</h2> <p>It is easy to produce publication-quality scientific figures using <a href="https://www.python.org/" rel="external nofollow noopener" target="_blank">Python</a>, <a href="https://github.com/garrettj403/SciencePlots" rel="external nofollow noopener" target="_blank">Matplotlib</a> and <a href="https://github.com/garrettj403/SciencePlots" rel="external nofollow noopener" target="_blank">SciencePlots</a>, with just a few additional tweaks of <a href="https://matplotlib.org/stable/users/explain/customizing.html" rel="external nofollow noopener" target="_blank">rcParams</a>.</p> <h2 id="overview">Overview</h2> <p>Python (<em>3.x</em>) is a popular and versatile programming language and over the years it has become my go-to tool for a wide variety of science-related problems. In particular, I like to use <a href="https://jupyter.org/" rel="external nofollow noopener" target="_blank">Jupyter</a> notebooks as a way of documenting and iterating on data exploration and analysis, and so plotting data and producing figures is an inherent part of this process. There are numerous plotting packages for Python, e.g. <a href="https://docs.bokeh.org/en/latest/#" rel="external nofollow noopener" target="_blank">Bokeh</a>, <a href="https://plot.ly/python/" rel="external nofollow noopener" target="_blank">Plotly</a> and <a href="https://altair-viz.github.io/getting_started/overview.html" rel="external nofollow noopener" target="_blank">Altair</a>. Each library has its merits and can all produce very attractive, publication-quality figures. I have dabbled with a number of these packages, but recently I have settled on perhaps the slightly more humble Matplotlib as a reliable way to produce very high-quality figures of the type you would find in a peer-reviewed publication or conference presentation.</p> <h3 id="basic-plots">Basic Plots</h3> <p>Most Python-using-scientists will have probably used Matplotlib at one time or another to plot out a curve or some experimental data, and would have been met with something like this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="sh">"</span><span class="s">default</span><span class="sh">"</span><span class="p">)</span>
 
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">default_rng</span><span class="p">(</span><span class="mi">314159</span><span class="p">)</span>
 
<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">ran_nums</span> <span class="o">=</span> <span class="n">rng</span><span class="p">.</span><span class="nf">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
 
<span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
 
<span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">e</span> <span class="o">=</span> <span class="mi">3</span>
 
<span class="n">beta</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">alpha</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">e</span><span class="o">*</span><span class="n">ran_nums</span>
 
<span class="n">fit</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyfit</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
 
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="sh">'</span><span class="s">o</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">)</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span>
         <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyval</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">fit</span><span class="p">),</span>
         <span class="sh">'</span><span class="s">-</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">alpha (units a)</span><span class="sh">'</span><span class="p">)</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">beta (units b)</span><span class="sh">'</span><span class="p">)</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">savefig</span><span class="p">(</span><span class="sh">'</span><span class="s">./output/fig_v1.png</span><span class="sh">'</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="sh">'</span><span class="s">tight</span><span class="sh">'</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
 
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/240903/fig_v1-480.webp 480w,/assets/img/240903/fig_v1-800.webp 800w,/assets/img/240903/fig_v1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/240903/fig_v1.jpg" class="img-fluid rounded z-depth-1" width="600" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>As a stand in for real data, I have generated some random numbers following a relationship between the two quantities \(\alpha\) and \(\beta\) such that \(\beta \propto \alpha\), with \(\alpha\) as our independent variable and \(\beta\) our dependent variable (blue circles). The data \(\beta(\alpha)\) are fitted with a straight line, shown in red.</p> <p>The resulting figure is perfectly useful in conveying the information and would probably be sufficient for my own personal notes. However, I would be hesitant to share such a rudimentary figure with colleagues and certainly wouldn’t consider using it in a publication or presentation.</p> <h3 id="scienceplots">SciencePlots</h3> <p>The simplest and easiest way to improve on the default style of Matplotlib is the Python package <code class="language-plaintext highlighter-rouge">SciencePlots</code> :</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">scienceplots</span>

<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">([</span><span class="sh">'</span><span class="s">science</span><span class="sh">'</span><span class="p">])</span>

<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">default_rng</span><span class="p">(</span><span class="mi">314159</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">ran_nums</span> <span class="o">=</span> <span class="n">rng</span><span class="p">.</span><span class="nf">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">e</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">beta</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">alpha</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">e</span><span class="o">*</span><span class="n">ran_nums</span>

<span class="n">fit</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyfit</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="sh">'</span><span class="s">o</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">tab:blue</span><span class="sh">'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Data</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span>
         <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyval</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">fit</span><span class="p">),</span>
         <span class="sh">'</span><span class="s">-</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">tab:red</span><span class="sh">'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Fit</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">$\alpha$ (Units A)</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">$\beta$ (Units B)</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">savefig</span><span class="p">(</span><span class="sh">'</span><span class="s">./output/fig_v2.png</span><span class="sh">'</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="sh">'</span><span class="s">tight</span><span class="sh">'</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/240903/fig_v2-480.webp 480w,/assets/img/240903/fig_v2-800.webp 800w,/assets/img/240903/fig_v2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/240903/fig_v2.jpg" class="img-fluid rounded z-depth-1" width="600" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>The main usage is to import the package using <code class="language-plaintext highlighter-rouge">import scienceplots</code> and to direct Matplotlib to use the default style with <code class="language-plaintext highlighter-rouge">plt.style.use(["science"])</code> (you can include multiple styles here to combine features - see <a href="https://github.com/garrettj403/SciencePlots/wiki/Gallery" rel="external nofollow noopener" target="_blank">here</a>). With this simple change, the figure already looks a lot more professional.</p> <p>Some other minor changes are to override the default Matplotlib colours with colours from the <a href="https://matplotlib.org/stable/gallery/color/named_colors.html#tableau-palette" rel="external nofollow noopener" target="_blank">Tableau palette</a>. SciencePlots also includes a more aesthetically pleasing colour palette - just remove the colour specification (<code class="language-plaintext highlighter-rouge">c=tab:x</code>) from the <code class="language-plaintext highlighter-rouge">ax.plot</code> lines.</p> <p>Additionally, I set the left and bottom limits of the two axes to be zero, as this helps provide a more intuitive understanding of what kind of trend $\beta(\alpha)$ follows. In doing so, the first data point now overlaps the y-axis line - setting <code class="language-plaintext highlighter-rouge">zorder=10</code> (a high number) and <code class="language-plaintext highlighter-rouge">clip_on=False</code> ensures the point is plotted on top of the line and is not clipped by the frame either. An additional consequence is now the line of the linear fit is plotted below the data points. Personally I think I prefer it this way, but you could remedy this by setting the <code class="language-plaintext highlighter-rouge">zorder</code> of the line to be higher than the data points.</p> <p>I also switched from the <code class="language-plaintext highlighter-rouge">plt.plot</code> syntax to the <code class="language-plaintext highlighter-rouge">ax.plot</code> syntax (using <code class="language-plaintext highlighter-rouge">plt.subplots</code>) - the latter is a lot more powerful and has broader functionality, though it is somewhat more verbose, e.g. <code class="language-plaintext highlighter-rouge">ax.set_xlabel</code> compared to <code class="language-plaintext highlighter-rouge">plt.xlabel</code>. Finally, I used $\LaTeX$-compatible dollar-math and slash-commands, e.g. <code class="language-plaintext highlighter-rouge">$\alpha$</code>, to produce Greek characters in the axes labels (you need to specify a raw string with the prefix <code class="language-plaintext highlighter-rouge">r""</code> for this to work).</p> <p>The combined result is a much more refined and well-considered presentation of the data. The figure is also pleasing to look at, which is no bad thing! The major downside that you might experience is the inclusion of <code class="language-plaintext highlighter-rouge">scienceplots</code> can cause the execution time of the Python script to increasing quite substantially.</p> <h3 id="further-improvements-with-rcparams">Further Improvements with rcParams</h3> <p>Whilst we have already made a substantial jump in quality from the default Matplotlib figures, we can make some further refinements by turning our attention to <code class="language-plaintext highlighter-rouge">matplotlib.rcParams</code>. With this, it is possible to customise a wide variety of the various components that make up a Matplotlib figure. However, the documentation is <a href="https://matplotlib.org/stable/users/explain/customizing.html" rel="external nofollow noopener" target="_blank">quite extensive</a>, which can make figuring out what changes to make quite tricky. As a shortcut, here are some that I have found useful in the following script:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">scienceplots</span>

<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">([</span><span class="sh">'</span><span class="s">science</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">nature</span><span class="sh">'</span><span class="p">])</span>

<span class="n">plot_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">figure.dpi</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">200</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.linewidth</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.titlesize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">legend.title_fontsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">legend.fontsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.major.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.major.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.minor.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.minor.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.major.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.major.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.minor.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.minor.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">plot_params</span><span class="p">)</span>

<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">default_rng</span><span class="p">(</span><span class="mi">314159</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">ran_nums</span> <span class="o">=</span> <span class="n">rng</span><span class="p">.</span><span class="nf">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">e</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">beta</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">alpha</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">e</span><span class="o">*</span><span class="n">ran_nums</span>

<span class="n">fit</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyfit</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="sh">'</span><span class="s">o</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">tab:blue</span><span class="sh">'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Data</span><span class="sh">'</span><span class="p">,</span>
        <span class="n">ms</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">mfc</span><span class="o">=</span><span class="sh">'</span><span class="s">none</span><span class="sh">'</span><span class="p">,</span> <span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span>
         <span class="n">np</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="n">polynomial</span><span class="p">.</span><span class="nf">polyval</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">fit</span><span class="p">),</span>
         <span class="sh">'</span><span class="s">-</span><span class="sh">'</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sh">'</span><span class="s">tab:red</span><span class="sh">'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">Fit</span><span class="sh">'</span><span class="p">,</span>
         <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">$\alpha$ (Units A)</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">$\beta$ (Units B)</span><span class="sh">'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nf">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">tight_layout</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.1</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">savefig</span><span class="p">(</span><span class="sh">'</span><span class="s">./output/fig_v3.png</span><span class="sh">'</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="sh">'</span><span class="s">tight</span><span class="sh">'</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/240903/fig_v3-480.webp 480w,/assets/img/240903/fig_v3-800.webp 800w,/assets/img/240903/fig_v3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/240903/fig_v3.jpg" class="img-fluid rounded z-depth-1" width="600" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><code class="language-plaintext highlighter-rouge">plot_params</code> is a dictionary containing the new values for the specified parameters (key:value pairs). These values are updated using <code class="language-plaintext highlighter-rouge">plt.rcParams.update</code> and passing in the dictionary.</p> <p>The main purpose of the changes is to improve the readability of the figure, particularly considering how it might appear on an A4 printed sheet of paper (<em>this is always worth trying to keep in mind</em>). This is done by increasing the font size of the axes labels, tick labels and legend items (and can be extended to any other text you might have). Additionally, the axes themselves are thicker, along with the major and minor tick labels.</p> <p>Furthermore, I have included the <code class="language-plaintext highlighter-rouge">nature</code> theme in addition to the default <code class="language-plaintext highlighter-rouge">science</code> from SciencePlots, which has the major effect of switching to a sans-serif font throughout. When preparing figures for a specific journal, there may be certain specific style guidelines that should be followed.</p> <p>Finally, I increased the size of the markers (<code class="language-plaintext highlighter-rouge">ms</code>) for the data points, giving them a thick edge (marker edge width: <code class="language-plaintext highlighter-rouge">mew</code>) and no centre fill (marker fill colour: <code class="language-plaintext highlighter-rouge">mfc</code>). For the fitted line, I increased the line width (<code class="language-plaintext highlighter-rouge">lw</code>) and also made the line slightly transparent by adjusting the <code class="language-plaintext highlighter-rouge">alpha</code>, with <code class="language-plaintext highlighter-rouge">0</code> being fully transparent. The result is you can see the line clearly behind the markers. Of course, this may or may not be appropriate depending on your objective.</p> <p>The final result is what I would argue to be a very professional and publication-ready figure. Nice!</p> <h3 id="conclusion">Conclusion</h3> <p>We’ve seen that with fairly little effort, it is possible to take a very basic Matplotlib figure and turn it into a high-quality, publication-ready figure. It should be easy to apply these improvements to more sophisticated figures - those with multiple curves, subplots or even subfigures - something I plan to look at in a forthcoming <em>part 2</em>.</p> <p>If you are creating a set of figures and you want to have consistent styling, one option is to simply copy-paste your boilerplate code to the top of each script/notebook. However, this quickly becomes tedious and makes it difficult to make consistent, future changes. A possibility is to instead put all of the boilerplate into a separate script located alongside your other scripts, e.g. <code class="language-plaintext highlighter-rouge">update_mpl.py</code> :</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">scienceplots</span>

<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">([</span><span class="sh">'</span><span class="s">science</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">nature</span><span class="sh">'</span><span class="p">])</span>

<span class="n">plot_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">figure.dpi</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">200</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.linewidth</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">axes.titlesize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.labelsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">legend.title_fontsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">legend.fontsize</span><span class="sh">"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.major.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.major.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.minor.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">xtick.minor.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.major.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.major.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.minor.size</span><span class="sh">"</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">ytick.minor.width</span><span class="sh">"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">plot_params</span><span class="p">)</span>
</code></pre></div></div> <p>Then, at the top of your script, <code class="language-plaintext highlighter-rouge">import update_mpl</code> (<em>be careful of relative imports!</em>) along with all your usual packages (<code class="language-plaintext highlighter-rouge">numpy</code>, <code class="language-plaintext highlighter-rouge">matplotlib</code> etc). If you use Jupyter notebooks, you can also use the magic <code class="language-plaintext highlighter-rouge">%run update_mpl.py</code> at the very top of your notebook to run the script (handy for other uses, too). Then, if you make a change to <code class="language-plaintext highlighter-rouge">update_mpl.py</code>, just rerun your scripts to generate the updated output.</p> <h4 id="version-information">Version Information</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">python</code> : 3.12.2</li> <li> <code class="language-plaintext highlighter-rouge">numpy</code> : 1.26.4</li> <li> <code class="language-plaintext highlighter-rouge">matplotlib</code> : 3.8.3</li> <li> <code class="language-plaintext highlighter-rouge">scienceplots</code> : 2.1.1</li> </ul> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Joseph Alec Wilcox. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: November 25, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?fa0110e8b42cec56ce96d912fd4bde74"></script> <script>addBackToTop();</script> </body> </html>